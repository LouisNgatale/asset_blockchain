// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model User {
  id          String   @id @default(auto()) @map("_id") @db.ObjectId
  uuid        String   @unique
  email       String   @unique
  NIDA        String   @unique
  fullName    String
  otp         String?
  phoneNumber String
  countryCode String   @default("255")
  role        UserRole @default(value: CITIZEN)
  createdAt   DateTime @default(now())
  citizenship String   @default("Tanzania")

  @@map("user")
}

model Asset {
  id           String          @id @default(auto()) @map("_id") @db.ObjectId
  uuid         String          @unique
  type         ASSET_TYPE
  owner        AssetOwner
  location     AssetLocation?
  dimensions   AssetDimensions
  isListed     Boolean
  images       String[]
  description  String?
  valuation    String?
  parcelNumber String
  plotNumber   String
  titleNumber  String
  documents    AssetDocument[]
  registeredAt DateTime        @default(now())

  @@map("asset")
}

type AssetOwner {
  uuid        String
  fullName    String
  NIDA        String
  phoneNumber String
}

type AssetLocation {
  latitude       Int
  longitude      Int
  nearbyLocation String?
  locationName   String
}

type AssetDimensions {
  value Int
  unit  String
}

type AssetDocument {
  type String
  url  String
}

enum ASSET_TYPE {
  LAND
  BUILDING
  MOTOR_VEHICLE
}

enum UserRole {
  ADMIN
  CITIZEN
}
